\documentclass{../ximera}
\input{../lessonplanheader.tex}

\title{Modular arithmetic calculations and the $\phi-$ function}
\begin{document}
\begin{abstract}
\end{abstract}
\maketitle

%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{obj}
\item Use Euler's Theorem to find the least nonnegative residue modulo a composite
\item Use Euler's Theorem to find the multiplicative inverse of an integer modulo $m$
\item Prove $\phi(4)\phi(5)=\phi(20)$ using an outline that mirrors the proof that $\phi(m)\phi(n)=\phi(mn)$ when $(m,n)=1$
\end{obj}


\begin{pre}
    \item[Reading] None
\end{pre}

%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Multiplicative inverses using Euler's Extension of Fermat's Little Theorem (30 min)}
%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{example}\label{ex-euler-solve-cong}
 
\begin{enumerate}
 \item Find the least nonnegative residue of $29^{202}$ modulo $20$. 
 
 The integers $1,3,7,9,11,13,17,19$ are relatively prime to $20.$ Thus $\phi(20)=8.$ Also note that $29\equiv 9\pmod{20}$ and $202=8(25)+2,$ so 
 \[29^{202}\equiv 9^{202}\equiv(9^8)^{25} 9^2\equiv 1^{25} 9^2\equiv 1\pmod{20}\] 
 
 \item Find the least nonnegative residue of $71^{71}$ modulo $16$.
 
 The integers $1,3,5,7,9,11,13,15$ are relatively prime to $16.$ Thus $\phi(16)=8.$ Also note that $71\equiv 7\pmod{16}$ and $71=8(8)+7,$ so 
  \[71^{71}\equiv 7^{71}\equiv(7^8)^{8} 7^7\equiv 1^{8} 7^7\pmod{16}\] 
Since $7^8\equiv 7^7 7\equiv 1\pmod{16},$ $7^7$ is the multiplicative inverse of $7$ mulod $16.$

Using the Euclidean algorithm, 
\begin{align*}
 16	& = 7(2) + 2,	&2&=16+7(-2)\\
 7	& = 2(3) + 1,	&1&=7-2(3)=7-(16+7(-2))(3)=16(-3)+7(7)
\end{align*}
Thus, $7(7)\equiv 1\pmod{16},$ and $7^7\equiv 7\pmod{16}.$
\end{enumerate}
\end{example}

\begin{cor*}[Corollary 2.19]\label{cor:inv-euler}
 Let $a,m\in\Z$ with $m>0.$  If $(a,m)=1,$ then $a^{\phi(m)-1}$ is the multiplicative inverse of $a$ modulo $m$.
\end{cor*}

\begin{example}
 Find all incongruent solutions to $9x\equiv 21\pmod{25}$.
 
The only positive integers less than $25$ that are \emph{not} relatively prime to $25$ are $5,10,15,20$. Thus, $\phi(25)=24-4=20.$

Since$(9,25)=1,$ there is only one  incongruent solution  modulo $25.$ By \nameref{cor:inv-euler}, $9^{19}$ is the multiplicative inverse of $9$ modulo ${25}$. Thus, $x\equiv 21(9^{19})\pmod{25.}$

Alternately, $3^{18}$ is the multiplicative inverse of $3^2$ modulo ${25},$ so $x\equiv 21(3^{18})\equiv  (3^{19})7\pmod{25}.$
\end{example}

The previous example does not ask for the least nonnegative residue, but let's find it anyway.

\begin{example}
  Find the least nonnegative residue of $(9^{19})21$ modulo $25$.

  First, note that $(9^{19})21=(3^2)^19(21)$. From here there are two options:

  \begin{description}
    \item[Factor $21$:]
      \begin{align*}
        (9^{19})21\equiv (3^2)^19(3)(7)
        \equiv (3^{39})(7)
        \equiv (3^{20})(3^{19})(7) \pmod{25}
      \end{align*}
      By \nameref{thm:euler-FlT}, $3^{20}\equiv 1\pmod{25}$ and by \nameref{cor:inv-euler}, $3^{19}$ is the multiplicative inverse of $3$ moddulo $25.$ Since $3(-8)\equiv -24\equiv 1\pmod{25},$ $3^{19}\equiv -8\pmod{25.}$ Thus, 
      \begin{align*}
        (9^{19})21\equiv (-8)(7)\equiv -56\equiv 19 \pmod{25}.
      \end{align*}

    \item[Using $21\equiv -4\pmod{25}$:] 
      \begin{align*}
        (9^{19})21\equiv (3^2)^19(-4)
        \equiv (3^{38})(-4)
        \equiv (3^{20})(3^{18})(-4) \pmod{25}
      \end{align*}
      Since $3^{20}=3^{18}(3^2)\equiv 1\pmod{25}$ by \nameref{thm:euler-FlT}, $3^{18}$ is the multiplicative inverse of $3^2=9$ modulo $25.$ Since $9(-11)\equiv -99\equiv 1\pmod{25},$ we have $3^{18}\equiv -11\pmod{25}.$ Thus, 
      \begin{align*}
        (9^{19})21\equiv (-11)(-4)\equiv 44 \equiv 19 \pmod{25}.
      \end{align*}
  \end{description}
  
\end{example}

\begin{br}\label{br:modpq}
  Let $p,q$ be distinct primes. Prove that $p^{q-1}+q^{p-1}\equiv 1 \pmod{pq}.$
 
 
  \begin{proof} Let $p,q$ be distinct primes. 
   Then $\answer{q^{p-1}\equiv 1}\pmod{p}$ and  $\answer{p^{q-1}\equiv 1}\pmod{q}$ by Fermat's Little Theorem, and $\answer{p^{q-1}\equiv 1}\equiv0\pmod{p}$ and  $\answer{q^{p-1}\equiv 1}\equiv 0\pmod{q}$ by $\answer{\textnormal{definition}}.$
   
   Thus, $p^{q-1}+q^{p-1}\equiv \answer{1} \pmod{p}$ and $p^{q-1}+q^{p-1}\equiv \answer{1} \pmod{p}$ by $\answer{\textnormal{modular addition}}.$

   (Finish proof using definition of congruence modulo $p$ and $q$)
  \end{proof}
\end{br}

%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{The Euler $\phi$-function (20 min)}\label{sec-phi-start}
%%%%%%%%%%%%%%%%%%%%%%%%%%

We will also find a formula for $\phi(n)$ in general. The following exercise will outline the general proof:

\begin{br}\label{br:multiplicative-proof}
  Let us prove that $\phi(20)=\phi(4)\phi(5)$. First, note that $\phi(4)=\answer{2}$ and $\phi(5)=\answer{4}$, so $\phi(20)=\answer{8}$.
  \begin{enumerate}
    \item A number $a$ is relatively prime to $20$ if and only if $a$ is relatively prime to $\answer{4}$ and $\answer{5}$ %(first blank should be smaller than second blank for the automatic grading to work, both should be relevant to what we are trying to show). 
    
    \item  
    We can partition the positive integers less that $20$ into 
    \begin{align*}
      & 0\equiv\answer{4}\equiv\answer{8}\equiv\answer{12}\equiv\answer{16}\pmod 4\\
      & 1\equiv\answer{5}\equiv\answer{9}\equiv\answer{13}\equiv\answer{17}\pmod 4\\
      & 2\equiv\answer{6}\equiv\answer{10}\equiv\answer{14}\equiv\answer{18}\pmod 4\\
      & 3\equiv\answer{7}\equiv\answer{11}\equiv\answer{15}\equiv\answer{19}\pmod 4
    \end{align*}
 
    For any $b$ in the range $0,1,2,3$, define $s_b$ to be the number of integers $a$ in the range $0,1,2,\dots, 19$ such that $a\equiv b \pmod 4$ and $\gcd(a,20)=1$. Thus, $s_0=\answer{0}, s_1=\answer{4}, s_2=\answer{0}$, and $s_3=\answer{4}$.
 
    We can see that when $(b,4)=1$, $s_b=\phi(\answer{5})$ and when $(b,4)>1$, $s_b=\answer{0}$.
 
    \item $\phi(20)=s_0+s_1+s_2+s_3$. Why? 
 
    \begin{solution}
      All of the positive integers less than or equal to $20$ is in exactly one of the congruence classes above. The $s_i$ count how many integers in each congruence class are relatively prime to $20$. If we add them up, we have counted all positive integers less than or equal to $20$.
    \end{solution}
 
    \item We have seen that $\phi(20)=s_0+s_1+s_2+s_3$, that when $(b,4)=1$, $s_b=\phi(5)$, and that when $(b,4)>1$, $s_b=0$. Thus, we can say that $\phi(20)=0+\phi(\answer{5})+0+\phi(\answer{5})$. To finish the 	``proof" we show that there are $\phi(\answer{4})$ integers $b$ where $(b,4)=1$. 
 
    \begin{solution}
      There are $\answer{4}$ congruence classes modulo 4. Of these, $\answer{2}=\phi(\answer{4})$ have elements that are relatively prime to $20$. Thus, $\phi(20)=\phi(4)\phi(5)$.
    \end{solution}
  \end{enumerate}
 
\end{br}



\end{document}
